---
import '../../style/global.css';
import FaroukHeaderImage from '../../components/FaroukHeaderImage.astro';
import PostPreview from '../../components/PostPreview.astro';

const posts = await Astro.glob('../*.md');
const sortedPosts = posts.sort((a, b) => {
	return (
		new Date(b.frontmatter.date).valueOf() -
		new Date(a.frontmatter.date).valueOf()
	);
});
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZQ1NVVHBMD"
		></script>
		<script>
			// @ts-ignore
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				// @ts-ignore
				dataLayer.push(arguments);
			}
			// @ts-ignore
			gtag('js', new Date());

			// @ts-ignore
			gtag('config', 'G-ZQ1NVVHBMD');
		</script>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
		<link rel="manifest" href="/site.webmanifest" />
		<!-- Google Tag Manager -->
		<script>
			(function (w: any, d: any, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, 'script', 'dataLayer', 'GTM-T7FRZT9');
		</script>
		<!-- End Google Tag Manager -->
		<title>Farouk's blog</title>
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-T7FRZT9"
				height="0"
				width="0"
				style="display:none;visibility:hidden"></iframe>
		</noscript>
		<!-- End Google Tag Manager (noscript) -->
		<main class="h-full w-full">
			<div class="absolute right-0 z-10 p-5 font-bold text-xl text-right">
				<a class="text-slate-800" href="https://github.com/Faroukhamadi"
					>Github</a
				>
				<br />
				<a class="text-slate-800" href="https://twitter.com/FaroukHamadii"
					>Twitter</a
				>
				<br />
				<a rel="prefetch" class="text-slate-800" href="/links">More</a>
			</div>
			<div class="text-slate-800 flex flex-col text-center items-center">
				<div class="w-48 mt-6"><FaroukHeaderImage /></div>
				<h1 class="text-4xl font-bold pt-2">Farouk's Blog</h1>
				<h4 class="text-xl mt-5 xl:text-2xl xl:mt-10 xl:mx-20 px-8">
					A blog about Programming, Computer Science, Design Patterns and all
					kinds of hot things going on with tech :)
				</h4>
			</div>
			<div class="xl:mx-20">
				{sortedPosts.map((p) => <PostPreview post={p} />)}
			</div>
		</main>
	</body>
</html>
